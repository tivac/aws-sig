!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self)["aws-sig"]=e()}(this,function(){"use strict";var t=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),e={},n=e.lib={},r=n.Base={extend:function(e){var n=t(this);return e&&n.mixIn(e),n.hasOwnProperty("init")&&this.init!==n.init||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},i=n.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=Math.ceil(e/4)},clone:function(){var t=r.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e,n=[],r=function(t){t=t;var e=987654321,n=4294967295;return function(){var r=((e=36969*(65535&e)+(e>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return r/=4294967296,(r+=.5)*(Math.random()>.5?1:-1)}},o=0;o<t;o+=4){var s=r(4294967296*(e||Math.random()));e=987654071*s(),n.push(4294967296*s()|0)}return new i.init(n,t)}}),o=e.enc={},s=o.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new i.init(n,e/2)}},a=o.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new i.init(n,e)}},c=o.Utf8={stringify:function(t){try{return decodeURIComponent(escape(a.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return a.parse(unescape(encodeURIComponent(t)))}},u=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,n=e.words,r=e.sigBytes,o=this.blockSize,s=r/(4*o),a=(s=t?Math.ceil(s):Math.max((0|s)-this._minBufferSize,0))*o,c=Math.min(4*a,r);if(a){for(var u=0;u<a;u+=o)this._doProcessBlock(n,u);var f=n.splice(0,a);e.sigBytes-=c}return new i.init(f,c)},clone:function(){var t=r.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(n.Hasher=u.extend({cfg:r.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),e.algo={}),h=e,l=h.lib.Base,d=h.enc.Utf8,p=(h.algo.HMAC=l.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=d.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),s=i.words,a=o.words,c=0;c<n;c++)s[c]^=1549556828,a[c]^=909522486;i.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}}),e),g=p.lib,y=g.WordArray,v=g.Hasher,w=p.algo,m=[],_=[];!function(){function t(t){for(var e=Math.sqrt(t),n=2;n<=e;n++)if(!(t%n))return!1;return!0}function e(t){return 4294967296*(t-(0|t))|0}for(var n=2,r=0;r<64;)t(n)&&(r<8&&(m[r]=e(Math.pow(n,.5))),_[r]=e(Math.pow(n,1/3)),r++),n++}();var B=[],S=w.SHA256=v.extend({_doReset:function(){this._hash=new y.init(m.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],c=n[5],u=n[6],f=n[7],h=0;h<64;h++){if(h<16)B[h]=0|t[e+h];else{var l=B[h-15],d=(l<<25|l>>>7)^(l<<14|l>>>18)^l>>>3,p=B[h-2],g=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;B[h]=d+B[h-7]+g+B[h-16]}var y=r&i^r&o^i&o,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&u)+_[h]+B[h];f=u,u=c,c=a,a=s+w|0,s=o,o=i,i=r,r=w+(v+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+c|0,n[6]=n[6]+u|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=v.clone.call(this);return t._hash=this._hash.clone(),t}}),A=v._createHelper(S),j=v._createHmacHelper(S),z=function(t){return A(t).toString()},H=j,M=function(t){return encodeURIComponent(t).replace(/[*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})},b=function(t,e){return t.localeCompare(e)};function x(t){var e=t.url,n={},r=[];return e.searchParams.forEach(function(t,e){n[e]||(n[e]=[]),n[e].push(t)}),Object.keys(n).sort(b).forEach(function(t){n[t].sort(b).forEach(function(e){r.push(M(t)+"="+M(e))})}),r.join("&")}var C=function(t){return t.toString().trim().replace(/\s+/g," ")},k=function(t){return t.length?t.map(function(t){var e=t[0],n=t[1];return e+":"+(Array.isArray(n)?n.map(C).join(","):C(n))}).join("\n"):""},D=function(t){return t.map(function(t){return t[0]}).join(";")},E=function(t){var e=t.headers;return void 0===e&&(e={}),Object.keys(e).map(function(t){return[t.toLowerCase(),e[t]]}).sort(function(t,e){var n=t[0],r=e[0];return n.localeCompare(r)})},I=/\/\/+/g;var O=["url"],U=["accessKeyId","region","secretAccessKey","service"],q=function(t,e){if(!t)throw new Error("Missing request object");if(!e)throw new Error("Missing config object");var n=O.filter(function(e){return!t[e]});if(n.length)throw new Error("Missing required request fields: "+n.join(", "));if((n=U.filter(function(t){return!e[t]})).length)throw new Error("Missing required config fields: "+n.join(", "))},K=function(t,e){var n=t.algorithm,r=t.accessKeyId,i=t.date,o=t.region,s=t.service,a=t.sortedHeaders;return[n+" Credential="+r+"/"+i.short+"/"+o+"/"+s+"/aws4_request","SignedHeaders="+D(a),"Signature="+e].join(", ")},P=/[:\-]|\.\d{3}/g,R=function(t){var e=t.headers,n="X-Amz-Date"in e?e["X-Amz-Date"]:new Date(e.Date||Date.now()).toISOString().replace(P,"");return{short:n.split("T")[0],long:n}};return function(t,e){q(t,e),t.headers||(t.headers={});var n,r,i,o,s,a,c,u=Object.assign(Object.create(null),{method:"GET"},t,e,{url:new URL(t.url),algorithm:"AWS4-HMAC-SHA256",date:R(t),sortedHeaders:E(t)}),f=function(t,e){var n=t.date,r=t.secretAccessKey,i=t.region,o=t.service,s=H(n.short,"AWS4"+r),a=H(i,s),c=H(o,a),u=H("aws4_request",c);return H(e,u)}(u,function(t,e){var n=t.algorithm,r=t.date,i=t.region,o=t.service;return[n,r.long,r.short+"/"+i+"/"+o+"/aws4_request",z(e)].join("\n")}(u,(s=(n=u).method,a=n.body,c=n.sortedHeaders,[s.toUpperCase(),(r=n,i=r.service,o=r.url,"s3"===i?o.pathname:o.pathname.replace(I,"/").split("/").map(M).join("/")),x(n),k(c),"",D(c),z("string"==typeof a?a.trim():a)].join("\n")))),h=K(u,f);return t.headers["X-Amz-Date"]=u.date.long,e.sessionToken&&(t.headers["X-Amz-Security-Token"]=e.sessionToken),t.headers.Authorization=h,t}});
//# sourceMappingURL=aws-sig.umd.js.map

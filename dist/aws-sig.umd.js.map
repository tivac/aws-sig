{"version":3,"file":"aws-sig.umd.js","sources":["../src/crypto-es/core.js","../src/crypto-es/hmac.js","../src/crypto-es/sha256.js","../src/hash.js","../src/encode.js","../src/request/query.js","../src/request/headers.js","../src/request/path.js","../src/validate.js","../src/authorization.js","../src/index.js","../src/request/request.js","../src/signature.js","../src/stringtosign.js"],"sourcesContent":["/**\r\n * CryptoJS core components.\r\n */\r\n/*\r\n\t* Local polyfil of Object.create\r\n\t*/\r\nvar create = Object.create || (function () {\r\n\tfunction F() {};\r\n\r\n\treturn function (obj) {\r\n\t\tvar subtype;\r\n\r\n\t\tF.prototype = obj;\r\n\r\n\t\tsubtype = new F();\r\n\r\n\t\tF.prototype = null;\r\n\r\n\t\treturn subtype;\r\n\t};\r\n}())\r\n\r\n/**\r\n * CryptoJS namespace.\r\n */\r\nvar C = {};\r\n\r\n/**\r\n * Library namespace.\r\n */\r\nvar C_lib = C.lib = {};\r\n\r\n/**\r\n * Base object for prototypal inheritance.\r\n */\r\nvar Base = C_lib.Base = (function () {\r\n\r\n\r\n\treturn {\r\n\t\t/**\r\n\t\t * Creates a new object that inherits from this object.\r\n\t\t *\r\n\t\t * @param {Object} overrides Properties to copy into the new object.\r\n\t\t *\r\n\t\t * @return {Object} The new object.\r\n\t\t *\r\n\t\t * @static\r\n\t\t *\r\n\t\t * @example\r\n\t\t *\r\n\t\t *     var MyType = CryptoJS.lib.Base.extend({\r\n\t\t *         field: 'value',\r\n\t\t *\r\n\t\t *         method: function () {\r\n\t\t *         }\r\n\t\t *     });\r\n\t\t */\r\n\t\textend: function (overrides) {\r\n\t\t\t// Spawn\r\n\t\t\tvar subtype = create(this);\r\n\r\n\t\t\t// Augment\r\n\t\t\tif (overrides) {\r\n\t\t\t\tsubtype.mixIn(overrides);\r\n\t\t\t}\r\n\r\n\t\t\t// Create default initializer\r\n\t\t\tif (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\r\n\t\t\t\tsubtype.init = function () {\r\n\t\t\t\t\tsubtype.$super.init.apply(this, arguments);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t// Initializer's prototype is the subtype object\r\n\t\t\tsubtype.init.prototype = subtype;\r\n\r\n\t\t\t// Reference supertype\r\n\t\t\tsubtype.$super = this;\r\n\r\n\t\t\treturn subtype;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Extends this object and runs the init method.\r\n\t\t * Arguments to create() will be passed to init().\r\n\t\t *\r\n\t\t * @return {Object} The new object.\r\n\t\t *\r\n\t\t * @static\r\n\t\t *\r\n\t\t * @example\r\n\t\t *\r\n\t\t *     var instance = MyType.create();\r\n\t\t */\r\n\t\tcreate: function () {\r\n\t\t\tvar instance = this.extend();\r\n\t\t\tinstance.init.apply(instance, arguments);\r\n\r\n\t\t\treturn instance;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Initializes a newly created object.\r\n\t\t * Override this method to add some logic when your objects are created.\r\n\t\t *\r\n\t\t * @example\r\n\t\t *\r\n\t\t *     var MyType = CryptoJS.lib.Base.extend({\r\n\t\t *         init: function () {\r\n\t\t *             // ...\r\n\t\t *         }\r\n\t\t *     });\r\n\t\t */\r\n\t\tinit: function () {\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Copies properties into this object.\r\n\t\t *\r\n\t\t * @param {Object} properties The properties to mix in.\r\n\t\t *\r\n\t\t * @example\r\n\t\t *\r\n\t\t *     MyType.mixIn({\r\n\t\t *         field: 'value'\r\n\t\t *     });\r\n\t\t */\r\n\t\tmixIn: function (properties) {\r\n\t\t\tfor (var propertyName in properties) {\r\n\t\t\t\tif (properties.hasOwnProperty(propertyName)) {\r\n\t\t\t\t\tthis[propertyName] = properties[propertyName];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// IE won't copy toString using the loop above\r\n\t\t\tif (properties.hasOwnProperty('toString')) {\r\n\t\t\t\tthis.toString = properties.toString;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * Creates a copy of this object.\r\n\t\t *\r\n\t\t * @return {Object} The clone.\r\n\t\t *\r\n\t\t * @example\r\n\t\t *\r\n\t\t *     var clone = instance.clone();\r\n\t\t */\r\n\t\tclone: function () {\r\n\t\t\treturn this.init.prototype.extend(this);\r\n\t\t}\r\n\t};\r\n}());\r\n\r\n/**\r\n * An array of 32-bit words.\r\n *\r\n * @property {Array} words The array of 32-bit words.\r\n * @property {number} sigBytes The number of significant bytes in this word array.\r\n */\r\nvar WordArray = C_lib.WordArray = Base.extend({\r\n\t/**\r\n\t * Initializes a newly created word array.\r\n\t *\r\n\t * @param {Array} words (Optional) An array of 32-bit words.\r\n\t * @param {number} sigBytes (Optional) The number of significant bytes in the words.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var wordArray = CryptoJS.lib.WordArray.create();\r\n\t *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\r\n\t *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\r\n\t */\r\n\tinit: function (words, sigBytes) {\r\n\t\twords = this.words = words || [];\r\n\r\n\t\tif (sigBytes != undefined) {\r\n\t\t\tthis.sigBytes = sigBytes;\r\n\t\t} else {\r\n\t\t\tthis.sigBytes = words.length * 4;\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Converts this word array to a string.\r\n\t *\r\n\t * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\r\n\t *\r\n\t * @return {string} The stringified word array.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var string = wordArray + '';\r\n\t *     var string = wordArray.toString();\r\n\t *     var string = wordArray.toString(CryptoJS.enc.Utf8);\r\n\t */\r\n\ttoString: function (encoder) {\r\n\t\treturn (encoder || Hex).stringify(this);\r\n\t},\r\n\r\n\t/**\r\n\t * Concatenates a word array to this word array.\r\n\t *\r\n\t * @param {WordArray} wordArray The word array to append.\r\n\t *\r\n\t * @return {WordArray} This word array.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     wordArray1.concat(wordArray2);\r\n\t */\r\n\tconcat: function (wordArray) {\r\n\t\t// Shortcuts\r\n\t\tvar thisWords = this.words;\r\n\t\tvar thatWords = wordArray.words;\r\n\t\tvar thisSigBytes = this.sigBytes;\r\n\t\tvar thatSigBytes = wordArray.sigBytes;\r\n\r\n\t\t// Clamp excess bits\r\n\t\tthis.clamp();\r\n\r\n\t\t// Concat\r\n\t\tif (thisSigBytes % 4) {\r\n\t\t\t// Copy one byte at a time\r\n\t\t\tfor (var i = 0; i < thatSigBytes; i++) {\r\n\t\t\t\tvar thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t\t\t\tthisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// Copy one word at a time\r\n\t\t\tfor (var i = 0; i < thatSigBytes; i += 4) {\r\n\t\t\t\tthisWords[(thisSigBytes + i) >>> 2] = thatWords[i >>> 2];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.sigBytes += thatSigBytes;\r\n\r\n\t\t// Chainable\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Removes insignificant bits.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     wordArray.clamp();\r\n\t */\r\n\tclamp: function () {\r\n\t\t// Shortcuts\r\n\t\tvar words = this.words;\r\n\t\tvar sigBytes = this.sigBytes;\r\n\r\n\t\t// Clamp\r\n\t\twords[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\r\n\t\twords.length = Math.ceil(sigBytes / 4);\r\n\t},\r\n\r\n\t/**\r\n\t * Creates a copy of this word array.\r\n\t *\r\n\t * @return {WordArray} The clone.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var clone = wordArray.clone();\r\n\t */\r\n\tclone: function () {\r\n\t\tvar clone = Base.clone.call(this);\r\n\t\tclone.words = this.words.slice(0);\r\n\r\n\t\treturn clone;\r\n\t},\r\n\r\n\t/**\r\n\t * Creates a word array filled with random bytes.\r\n\t *\r\n\t * @param {number} nBytes The number of random bytes to generate.\r\n\t *\r\n\t * @return {WordArray} The random word array.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var wordArray = CryptoJS.lib.WordArray.random(16);\r\n\t */\r\n\trandom: function (nBytes) {\r\n\t\tvar words = [];\r\n\r\n\t\tvar r = (function (m_w) {\r\n\t\t\tvar m_w = m_w;\r\n\t\t\tvar m_z = 0x3ade68b1;\r\n\t\t\tvar mask = 0xffffffff;\r\n\r\n\t\t\treturn function () {\r\n\t\t\t\tm_z = (0x9069 * (m_z & 0xFFFF) + (m_z >> 0x10)) & mask;\r\n\t\t\t\tm_w = (0x4650 * (m_w & 0xFFFF) + (m_w >> 0x10)) & mask;\r\n\t\t\t\tvar result = ((m_z << 0x10) + m_w) & mask;\r\n\t\t\t\tresult /= 0x100000000;\r\n\t\t\t\tresult += 0.5;\r\n\t\t\t\treturn result * (Math.random() > .5 ? 1 : -1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfor (var i = 0, rcache; i < nBytes; i += 4) {\r\n\t\t\tvar _r = r((rcache || Math.random()) * 0x100000000);\r\n\r\n\t\t\trcache = _r() * 0x3ade67b7;\r\n\t\t\twords.push((_r() * 0x100000000) | 0);\r\n\t\t}\r\n\r\n\t\treturn new WordArray.init(words, nBytes);\r\n\t}\r\n});\r\n\r\n/**\r\n * Encoder namespace.\r\n */\r\nvar C_enc = C.enc = {};\r\n\r\n/**\r\n * Hex encoding strategy.\r\n */\r\nvar Hex = C_enc.Hex = {\r\n\t/**\r\n\t * Converts a word array to a hex string.\r\n\t *\r\n\t * @param {WordArray} wordArray The word array.\r\n\t *\r\n\t * @return {string} The hex string.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\r\n\t */\r\n\tstringify: function (wordArray) {\r\n\t\t// Shortcuts\r\n\t\tvar words = wordArray.words;\r\n\t\tvar sigBytes = wordArray.sigBytes;\r\n\r\n\t\t// Convert\r\n\t\tvar hexChars = [];\r\n\t\tfor (var i = 0; i < sigBytes; i++) {\r\n\t\t\tvar bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t\t\thexChars.push((bite >>> 4).toString(16));\r\n\t\t\thexChars.push((bite & 0x0f).toString(16));\r\n\t\t}\r\n\r\n\t\treturn hexChars.join('');\r\n\t},\r\n\r\n\t/**\r\n\t * Converts a hex string to a word array.\r\n\t *\r\n\t * @param {string} hexStr The hex string.\r\n\t *\r\n\t * @return {WordArray} The word array.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\r\n\t */\r\n\tparse: function (hexStr) {\r\n\t\t// Shortcut\r\n\t\tvar hexStrLength = hexStr.length;\r\n\r\n\t\t// Convert\r\n\t\tvar words = [];\r\n\t\tfor (var i = 0; i < hexStrLength; i += 2) {\r\n\t\t\twords[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\r\n\t\t}\r\n\r\n\t\treturn new WordArray.init(words, hexStrLength / 2);\r\n\t}\r\n};\r\n\r\n/**\r\n * Latin1 encoding strategy.\r\n */\r\nvar Latin1 = C_enc.Latin1 = {\r\n\t/**\r\n\t * Converts a word array to a Latin1 string.\r\n\t *\r\n\t * @param {WordArray} wordArray The word array.\r\n\t *\r\n\t * @return {string} The Latin1 string.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\r\n\t */\r\n\tstringify: function (wordArray) {\r\n\t\t// Shortcuts\r\n\t\tvar words = wordArray.words;\r\n\t\tvar sigBytes = wordArray.sigBytes;\r\n\r\n\t\t// Convert\r\n\t\tvar latin1Chars = [];\r\n\t\tfor (var i = 0; i < sigBytes; i++) {\r\n\t\t\tvar bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\r\n\t\t\tlatin1Chars.push(String.fromCharCode(bite));\r\n\t\t}\r\n\r\n\t\treturn latin1Chars.join('');\r\n\t},\r\n\r\n\t/**\r\n\t * Converts a Latin1 string to a word array.\r\n\t *\r\n\t * @param {string} latin1Str The Latin1 string.\r\n\t *\r\n\t * @return {WordArray} The word array.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\r\n\t */\r\n\tparse: function (latin1Str) {\r\n\t\t// Shortcut\r\n\t\tvar latin1StrLength = latin1Str.length;\r\n\r\n\t\t// Convert\r\n\t\tvar words = [];\r\n\t\tfor (var i = 0; i < latin1StrLength; i++) {\r\n\t\t\twords[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\r\n\t\t}\r\n\r\n\t\treturn new WordArray.init(words, latin1StrLength);\r\n\t}\r\n};\r\n\r\n/**\r\n * UTF-8 encoding strategy.\r\n */\r\nvar Utf8 = C_enc.Utf8 = {\r\n\t/**\r\n\t * Converts a word array to a UTF-8 string.\r\n\t *\r\n\t * @param {WordArray} wordArray The word array.\r\n\t *\r\n\t * @return {string} The UTF-8 string.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\r\n\t */\r\n\tstringify: function (wordArray) {\r\n\t\ttry {\r\n\t\t\treturn decodeURIComponent(escape(Latin1.stringify(wordArray)));\r\n\t\t} catch (e) {\r\n\t\t\tthrow new Error('Malformed UTF-8 data');\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * Converts a UTF-8 string to a word array.\r\n\t *\r\n\t * @param {string} utf8Str The UTF-8 string.\r\n\t *\r\n\t * @return {WordArray} The word array.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\r\n\t */\r\n\tparse: function (utf8Str) {\r\n\t\treturn Latin1.parse(unescape(encodeURIComponent(utf8Str)));\r\n\t}\r\n};\r\n\r\n/**\r\n * Abstract buffered block algorithm template.\r\n *\r\n * The property blockSize must be implemented in a concrete subtype.\r\n *\r\n * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\r\n */\r\nvar BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\r\n\t/**\r\n\t * Resets this block algorithm's data buffer to its initial state.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     bufferedBlockAlgorithm.reset();\r\n\t */\r\n\treset: function () {\r\n\t\t// Initial values\r\n\t\tthis._data = new WordArray.init();\r\n\t\tthis._nDataBytes = 0;\r\n\t},\r\n\r\n\t/**\r\n\t * Adds new data to this block algorithm's buffer.\r\n\t *\r\n\t * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     bufferedBlockAlgorithm._append('data');\r\n\t *     bufferedBlockAlgorithm._append(wordArray);\r\n\t */\r\n\t_append: function (data) {\r\n\t\t// Convert string to WordArray, else assume WordArray already\r\n\t\tif (typeof data == 'string') {\r\n\t\t\tdata = Utf8.parse(data);\r\n\t\t}\r\n\r\n\t\t// Append\r\n\t\tthis._data.concat(data);\r\n\t\tthis._nDataBytes += data.sigBytes;\r\n\t},\r\n\r\n\t/**\r\n\t * Processes available data blocks.\r\n\t *\r\n\t * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\r\n\t *\r\n\t * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\r\n\t *\r\n\t * @return {WordArray} The processed data.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var processedData = bufferedBlockAlgorithm._process();\r\n\t *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\r\n\t */\r\n\t_process: function (doFlush) {\r\n\t\t// Shortcuts\r\n\t\tvar data = this._data;\r\n\t\tvar dataWords = data.words;\r\n\t\tvar dataSigBytes = data.sigBytes;\r\n\t\tvar blockSize = this.blockSize;\r\n\t\tvar blockSizeBytes = blockSize * 4;\r\n\r\n\t\t// Count blocks ready\r\n\t\tvar nBlocksReady = dataSigBytes / blockSizeBytes;\r\n\t\tif (doFlush) {\r\n\t\t\t// Round up to include partial blocks\r\n\t\t\tnBlocksReady = Math.ceil(nBlocksReady);\r\n\t\t} else {\r\n\t\t\t// Round down to include only full blocks,\r\n\t\t\t// less the number of blocks that must remain in the buffer\r\n\t\t\tnBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\r\n\t\t}\r\n\r\n\t\t// Count words ready\r\n\t\tvar nWordsReady = nBlocksReady * blockSize;\r\n\r\n\t\t// Count bytes ready\r\n\t\tvar nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\r\n\r\n\t\t// Process blocks\r\n\t\tif (nWordsReady) {\r\n\t\t\tfor (var offset = 0; offset < nWordsReady; offset += blockSize) {\r\n\t\t\t\t// Perform concrete-algorithm logic\r\n\t\t\t\tthis._doProcessBlock(dataWords, offset);\r\n\t\t\t}\r\n\r\n\t\t\t// Remove processed words\r\n\t\t\tvar processedWords = dataWords.splice(0, nWordsReady);\r\n\t\t\tdata.sigBytes -= nBytesReady;\r\n\t\t}\r\n\r\n\t\t// Return processed words\r\n\t\treturn new WordArray.init(processedWords, nBytesReady);\r\n\t},\r\n\r\n\t/**\r\n\t * Creates a copy of this object.\r\n\t *\r\n\t * @return {Object} The clone.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var clone = bufferedBlockAlgorithm.clone();\r\n\t */\r\n\tclone: function () {\r\n\t\tvar clone = Base.clone.call(this);\r\n\t\tclone._data = this._data.clone();\r\n\r\n\t\treturn clone;\r\n\t},\r\n\r\n\t_minBufferSize: 0\r\n});\r\n\r\n/**\r\n * Abstract hasher template.\r\n *\r\n * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\r\n */\r\nvar Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\r\n\t/**\r\n\t * Configuration options.\r\n\t */\r\n\tcfg: Base.extend(),\r\n\r\n\t/**\r\n\t * Initializes a newly created hasher.\r\n\t *\r\n\t * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var hasher = CryptoJS.algo.SHA256.create();\r\n\t */\r\n\tinit: function (cfg) {\r\n\t\t// Apply config defaults\r\n\t\tthis.cfg = this.cfg.extend(cfg);\r\n\r\n\t\t// Set initial values\r\n\t\tthis.reset();\r\n\t},\r\n\r\n\t/**\r\n\t * Resets this hasher to its initial state.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     hasher.reset();\r\n\t */\r\n\treset: function () {\r\n\t\t// Reset data buffer\r\n\t\tBufferedBlockAlgorithm.reset.call(this);\r\n\r\n\t\t// Perform concrete-hasher logic\r\n\t\tthis._doReset();\r\n\t},\r\n\r\n\t/**\r\n\t * Updates this hasher with a message.\r\n\t *\r\n\t * @param {WordArray|string} messageUpdate The message to append.\r\n\t *\r\n\t * @return {Hasher} This hasher.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     hasher.update('message');\r\n\t *     hasher.update(wordArray);\r\n\t */\r\n\tupdate: function (messageUpdate) {\r\n\t\t// Append\r\n\t\tthis._append(messageUpdate);\r\n\r\n\t\t// Update the hash\r\n\t\tthis._process();\r\n\r\n\t\t// Chainable\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Finalizes the hash computation.\r\n\t * Note that the finalize operation is effectively a destructive, read-once operation.\r\n\t *\r\n\t * @param {WordArray|string} messageUpdate (Optional) A final message update.\r\n\t *\r\n\t * @return {WordArray} The hash.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var hash = hasher.finalize();\r\n\t *     var hash = hasher.finalize('message');\r\n\t *     var hash = hasher.finalize(wordArray);\r\n\t */\r\n\tfinalize: function (messageUpdate) {\r\n\t\t// Final message update\r\n\t\tif (messageUpdate) {\r\n\t\t\tthis._append(messageUpdate);\r\n\t\t}\r\n\r\n\t\t// Perform concrete-hasher logic\r\n\t\tvar hash = this._doFinalize();\r\n\r\n\t\treturn hash;\r\n\t},\r\n\r\n\tblockSize: 512/32,\r\n\r\n\t/**\r\n\t * Creates a shortcut function to a hasher's object interface.\r\n\t *\r\n\t * @param {Hasher} hasher The hasher to create a helper for.\r\n\t *\r\n\t * @return {Function} The shortcut function.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\r\n\t */\r\n\t_createHelper: function (hasher) {\r\n\t\treturn function (message, cfg) {\r\n\t\t\treturn new hasher.init(cfg).finalize(message);\r\n\t\t};\r\n\t},\r\n\r\n\t/**\r\n\t * Creates a shortcut function to the HMAC's object interface.\r\n\t *\r\n\t * @param {Hasher} hasher The hasher to use in this HMAC helper.\r\n\t *\r\n\t * @return {Function} The shortcut function.\r\n\t *\r\n\t * @static\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\r\n\t */\r\n\t_createHmacHelper: function (hasher) {\r\n\t\treturn function (message, key) {\r\n\t\t\treturn new C_algo.HMAC.init(hasher, key).finalize(message);\r\n\t\t};\r\n\t}\r\n});\r\n\r\n/**\r\n * Algorithm namespace.\r\n */\r\nvar C_algo = C.algo = {};\r\n\r\nexport default C;\r\n","import Crypto from \"./core.js\";\r\n\r\n// Shortcuts\r\nvar C = Crypto;\r\nvar C_lib = C.lib;\r\nvar Base = C_lib.Base;\r\nvar C_enc = C.enc;\r\nvar Utf8 = C_enc.Utf8;\r\nvar C_algo = C.algo;\r\n\r\n/**\r\n * HMAC algorithm.\r\n */\r\nvar HMAC = C_algo.HMAC = Base.extend({\r\n\t/**\r\n\t * Initializes a newly created HMAC.\r\n\t *\r\n\t * @param {Hasher} hasher The hash algorithm to use.\r\n\t * @param {WordArray|string} key The secret key.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);\r\n\t */\r\n\tinit: function (hasher, key) {\r\n\t\t// Init hasher\r\n\t\thasher = this._hasher = new hasher.init();\r\n\r\n\t\t// Convert string to WordArray, else assume WordArray already\r\n\t\tif (typeof key == 'string') {\r\n\t\t\tkey = Utf8.parse(key);\r\n\t\t}\r\n\r\n\t\t// Shortcuts\r\n\t\tvar hasherBlockSize = hasher.blockSize;\r\n\t\tvar hasherBlockSizeBytes = hasherBlockSize * 4;\r\n\r\n\t\t// Allow arbitrary length keys\r\n\t\tif (key.sigBytes > hasherBlockSizeBytes) {\r\n\t\t\tkey = hasher.finalize(key);\r\n\t\t}\r\n\r\n\t\t// Clamp excess bits\r\n\t\tkey.clamp();\r\n\r\n\t\t// Clone key for inner and outer pads\r\n\t\tvar oKey = this._oKey = key.clone();\r\n\t\tvar iKey = this._iKey = key.clone();\r\n\r\n\t\t// Shortcuts\r\n\t\tvar oKeyWords = oKey.words;\r\n\t\tvar iKeyWords = iKey.words;\r\n\r\n\t\t// XOR keys with pad constants\r\n\t\tfor (var i = 0; i < hasherBlockSize; i++) {\r\n\t\t\toKeyWords[i] ^= 0x5c5c5c5c;\r\n\t\t\tiKeyWords[i] ^= 0x36363636;\r\n\t\t}\r\n\t\toKey.sigBytes = iKey.sigBytes = hasherBlockSizeBytes;\r\n\r\n\t\t// Set initial values\r\n\t\tthis.reset();\r\n\t},\r\n\r\n\t/**\r\n\t * Resets this HMAC to its initial state.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     hmacHasher.reset();\r\n\t */\r\n\treset: function () {\r\n\t\t// Shortcut\r\n\t\tvar hasher = this._hasher;\r\n\r\n\t\t// Reset\r\n\t\thasher.reset();\r\n\t\thasher.update(this._iKey);\r\n\t},\r\n\r\n\t/**\r\n\t * Updates this HMAC with a message.\r\n\t *\r\n\t * @param {WordArray|string} messageUpdate The message to append.\r\n\t *\r\n\t * @return {HMAC} This HMAC instance.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     hmacHasher.update('message');\r\n\t *     hmacHasher.update(wordArray);\r\n\t */\r\n\tupdate: function (messageUpdate) {\r\n\t\tthis._hasher.update(messageUpdate);\r\n\r\n\t\t// Chainable\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/**\r\n\t * Finalizes the HMAC computation.\r\n\t * Note that the finalize operation is effectively a destructive, read-once operation.\r\n\t *\r\n\t * @param {WordArray|string} messageUpdate (Optional) A final message update.\r\n\t *\r\n\t * @return {WordArray} The HMAC.\r\n\t *\r\n\t * @example\r\n\t *\r\n\t *     var hmac = hmacHasher.finalize();\r\n\t *     var hmac = hmacHasher.finalize('message');\r\n\t *     var hmac = hmacHasher.finalize(wordArray);\r\n\t */\r\n\tfinalize: function (messageUpdate) {\r\n\t\t// Shortcut\r\n\t\tvar hasher = this._hasher;\r\n\r\n\t\t// Compute HMAC\r\n\t\tvar innerHash = hasher.finalize(messageUpdate);\r\n\t\thasher.reset();\r\n\t\tvar hmac = hasher.finalize(this._oKey.clone().concat(innerHash));\r\n\r\n\t\treturn hmac;\r\n\t}\r\n});\r\n","import Crypto from \"./core.js\";\r\nimport \"./hmac.js\";\r\n\r\n// Shortcuts\r\nvar C = Crypto;\r\nvar C_lib = C.lib;\r\nvar WordArray = C_lib.WordArray;\r\nvar Hasher = C_lib.Hasher;\r\nvar C_algo = C.algo;\r\n\r\n// Initialization and round constants tables\r\nvar H = [];\r\nvar K = [];\r\n\r\n// Compute constants\r\n(function () {\r\n\tfunction isPrime(n) {\r\n\t\tvar sqrtN = Math.sqrt(n);\r\n\t\tfor (var factor = 2; factor <= sqrtN; factor++) {\r\n\t\t\tif (!(n % factor)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction getFractionalBits(n) {\r\n\t\treturn ((n - (n | 0)) * 0x100000000) | 0;\r\n\t}\r\n\r\n\tvar n = 2;\r\n\tvar nPrime = 0;\r\n\twhile (nPrime < 64) {\r\n\t\tif (isPrime(n)) {\r\n\t\t\tif (nPrime < 8) {\r\n\t\t\t\tH[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\r\n\t\t\t}\r\n\t\t\tK[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\r\n\r\n\t\t\tnPrime++;\r\n\t\t}\r\n\r\n\t\tn++;\r\n\t}\r\n}());\r\n\r\n// Reusable object\r\nvar W = [];\r\n\r\n/**\r\n * SHA-256 hash algorithm.\r\n */\r\nvar SHA256Hasher = C_algo.SHA256 = Hasher.extend({\r\n\t_doReset: function () {\r\n\t\tthis._hash = new WordArray.init(H.slice(0));\r\n\t},\r\n\r\n\t_doProcessBlock: function (M, offset) {\r\n\t\t// Shortcut\r\n\t\tvar H = this._hash.words;\r\n\r\n\t\t// Working variables\r\n\t\tvar a = H[0];\r\n\t\tvar b = H[1];\r\n\t\tvar c = H[2];\r\n\t\tvar d = H[3];\r\n\t\tvar e = H[4];\r\n\t\tvar f = H[5];\r\n\t\tvar g = H[6];\r\n\t\tvar h = H[7];\r\n\r\n\t\t// Computation\r\n\t\tfor (var i = 0; i < 64; i++) {\r\n\t\t\tif (i < 16) {\r\n\t\t\t\tW[i] = M[offset + i] | 0;\r\n\t\t\t} else {\r\n\t\t\t\tvar gamma0x = W[i - 15];\r\n\t\t\t\tvar gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\r\n\t\t\t\t\t\t\t\t((gamma0x << 14) | (gamma0x >>> 18)) ^\r\n\t\t\t\t\t\t\t\t(gamma0x >>> 3);\r\n\r\n\t\t\t\tvar gamma1x = W[i - 2];\r\n\t\t\t\tvar gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\r\n\t\t\t\t\t\t\t\t((gamma1x << 13) | (gamma1x >>> 19)) ^\r\n\t\t\t\t\t\t\t\t(gamma1x >>> 10);\r\n\r\n\t\t\t\tW[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\r\n\t\t\t}\r\n\r\n\t\t\tvar ch  = (e & f) ^ (~e & g);\r\n\t\t\tvar maj = (a & b) ^ (a & c) ^ (b & c);\r\n\r\n\t\t\tvar sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\r\n\t\t\tvar sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\r\n\r\n\t\t\tvar t1 = h + sigma1 + ch + K[i] + W[i];\r\n\t\t\tvar t2 = sigma0 + maj;\r\n\r\n\t\t\th = g;\r\n\t\t\tg = f;\r\n\t\t\tf = e;\r\n\t\t\te = (d + t1) | 0;\r\n\t\t\td = c;\r\n\t\t\tc = b;\r\n\t\t\tb = a;\r\n\t\t\ta = (t1 + t2) | 0;\r\n\t\t}\r\n\r\n\t\t// Intermediate hash value\r\n\t\tH[0] = (H[0] + a) | 0;\r\n\t\tH[1] = (H[1] + b) | 0;\r\n\t\tH[2] = (H[2] + c) | 0;\r\n\t\tH[3] = (H[3] + d) | 0;\r\n\t\tH[4] = (H[4] + e) | 0;\r\n\t\tH[5] = (H[5] + f) | 0;\r\n\t\tH[6] = (H[6] + g) | 0;\r\n\t\tH[7] = (H[7] + h) | 0;\r\n\t},\r\n\r\n\t_doFinalize: function () {\r\n\t\t// Shortcuts\r\n\t\tvar data = this._data;\r\n\t\tvar dataWords = data.words;\r\n\r\n\t\tvar nBitsTotal = this._nDataBytes * 8;\r\n\t\tvar nBitsLeft = data.sigBytes * 8;\r\n\r\n\t\t// Add padding\r\n\t\tdataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\r\n\t\tdataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\r\n\t\tdataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\r\n\t\tdata.sigBytes = dataWords.length * 4;\r\n\r\n\t\t// Hash final blocks\r\n\t\tthis._process();\r\n\r\n\t\t// Return final computed hash\r\n\t\treturn this._hash;\r\n\t},\r\n\r\n\tclone: function () {\r\n\t\tvar clone = Hasher.clone.call(this);\r\n\t\tclone._hash = this._hash.clone();\r\n\r\n\t\treturn clone;\r\n\t}\r\n});\r\n\r\n/**\r\n * Shortcut function to the hasher's object interface.\r\n *\r\n * @param {WordArray|string} message The message to hash.\r\n *\r\n * @return {WordArray} The hash.\r\n *\r\n * @static\r\n *\r\n * @example\r\n *\r\n *     var hash = CryptoJS.SHA256('message');\r\n *     var hash = CryptoJS.SHA256(wordArray);\r\n */\r\nconst SHA256 = Hasher._createHelper(SHA256Hasher);\r\n\r\n/**\r\n * Shortcut function to the HMAC's object interface.\r\n *\r\n * @param {WordArray|string} message The message to hash.\r\n * @param {WordArray|string} key The secret key.\r\n *\r\n * @return {WordArray} The HMAC.\r\n *\r\n * @static\r\n *\r\n * @example\r\n *\r\n *     var hmac = CryptoJS.HmacSHA256(message, key);\r\n */\r\nconst HmacSHA256 = Hasher._createHmacHelper(SHA256Hasher);\r\n\r\nexport { SHA256, HmacSHA256 };\r\n","/* eslint-disable new-cap */\r\nimport { SHA256, HmacSHA256 } from \"./crypto-es/sha256.js\";\r\n\r\nconst hash = (str) =>\r\n    SHA256(str).toString();\r\n\r\nconst hmac = HmacSHA256;\r\n    \r\nexport { hmac, hash };\r\n","\"use strict\";\r\n\r\n// Replace one extra character beyond what encodeURIComponent does, \"*\"\r\n// See https://github.com/aws/aws-sdk-js/blob/38bf84c144281f696768e8c64500f2847fe6f298/lib/util.js#L39-L49\r\nconst encode = (str) =>\r\n    encodeURIComponent(str)\r\n    .replace(/[*]/g, (x) =>\r\n        // eslint-disable-next-line newline-per-chained-call\r\n        `%${x.charCodeAt(0).toString(16).toUpperCase()}`\r\n    );\r\n\r\nexport default encode;\r\n","import encode from \"../encode.js\";\r\n\r\nconst sort = (a, b) => a.localeCompare(b);\r\n\r\n// Sort query parameters by key\r\n// Then also sort by value because AWS\r\nexport default ({ url }) => {\r\n    const source = {};\r\n    const params = [];\r\n    \r\n    url.searchParams.forEach((value, key) => {\r\n        if(!source[key]) {\r\n            source[key] = [];\r\n        }\r\n\r\n        source[key].push(value);\r\n    });\r\n\r\n    Object.keys(source)\r\n        .sort(sort)\r\n        .forEach((key) => {\r\n            source[key]\r\n                .sort(sort)\r\n                .forEach((value) => {\r\n                    params.push(`${encode(key)}=${encode(value)}`);\r\n                });\r\n        });\r\n\r\n    return params.join(\"&\");\r\n};\r\n","const trim = (val) => {\r\n    return val\r\n        .toString()\r\n        .trim()\r\n        .replace(/\\s+/g, \" \");\r\n};\r\n\r\nconst values = (headers) => {\r\n    if(!headers.length) {\r\n        return \"\";\r\n    }\r\n\r\n    return headers\r\n        .map(([ key, vals ]) => {\r\n            return `${key}:${Array.isArray(vals) ? vals.map(trim).join(\",\") : trim(vals)}`;\r\n        })\r\n        .join(\"\\n\");\r\n};\r\n\r\nconst signed = (headers) => {\r\n    return headers\r\n        .map(([ key ]) => key)\r\n        .join(\";\");\r\n};\r\n\r\nconst sorted = ({ headers = {} }) => {\r\n    const out = Object.keys(headers).map((key) => [ key.toLowerCase(), headers[key] ]);\r\n\r\n    return out.sort(([ keya ], [ keyb ]) => keya.localeCompare(keyb));\r\n};\r\n\r\nexport { sorted, values, signed };\r\n","import encode from \"../encode.js\";\r\n\r\nconst multipleSlashesRegex = /\\/\\/+/g;\r\n\r\nexport default ({ service, url }) => {\r\n    // S3 doesn't use normalized paths at all\r\n    if(service === \"s3\") {\r\n        return url.pathname;\r\n    }\r\n    \r\n    return url.pathname\r\n        .replace(multipleSlashesRegex, \"/\")\r\n        .split(\"/\")\r\n        .map(encode)\r\n        .join(\"/\");\r\n};\r\n","const requestRequired = [\r\n    \"url\",\r\n];\r\n\r\nconst configRequired = [\r\n    \"accessKeyId\",\r\n    \"region\",\r\n    \"secretAccessKey\",\r\n    \"service\",\r\n];\r\n\r\n// Check for required params\r\nconst validate = (source, config) => {\r\n    if(!source) {\r\n        throw new Error(`Missing request object`);\r\n    }\r\n\r\n    if(!config) {\r\n        throw new Error(`Missing config object`);\r\n    }\r\n\r\n    let missing = requestRequired.filter((field) => !source[field]);\r\n\r\n    if(missing.length) {\r\n        throw new Error(`Missing required request fields: ${missing.join(\", \")}`);\r\n    }\r\n    \r\n    missing = configRequired.filter((field) => !config[field]);\r\n\r\n    if(missing.length) {\r\n        throw new Error(`Missing required config fields: ${missing.join(\", \")}`);\r\n    }\r\n};\r\n\r\nexport default validate;\r\n","import { signed } from \"./request/headers.js\";\r\n\r\nconst authorization = (req, sig) => {\r\n    const {\r\n        algorithm,\r\n        accessKeyId,\r\n        date,\r\n        region,\r\n        service,\r\n        sortedHeaders,\r\n    } = req;\r\n\r\n    return [\r\n        `${algorithm} Credential=${accessKeyId}/${date.short}/${region}/${service}/aws4_request`,\r\n        `SignedHeaders=${signed(sortedHeaders)}`,\r\n        `Signature=${sig}`,\r\n    ].join(\", \");\r\n};\r\n\r\nexport default authorization;\r\n","import testing from \"consts:testing\";\r\n\r\nimport request from \"./request/request.js\";\r\nimport { sorted } from \"./request/headers.js\";\r\nimport stringToSign from \"./stringtosign.js\";\r\nimport signature from \"./signature.js\";\r\nimport validate from \"./validate.js\";\r\nimport authorization from \"./authorization.js\";\r\n\r\nconst dateCleanRegex = /[:\\-]|\\.\\d{3}/g;\r\n\r\nconst parseDate = ({ headers }) => {\r\n    const datetime = \"X-Amz-Date\" in headers ?\r\n        headers[\"X-Amz-Date\"] :\r\n        (new Date(headers.Date || Date.now()))\r\n            .toISOString()\r\n            .replace(dateCleanRegex, \"\");\r\n\r\n    return {\r\n        short : datetime.split(\"T\")[0],\r\n        long  : datetime,\r\n    };\r\n};\r\n\r\nexport default (source, config) => {\r\n    validate(source, config);\r\n\r\n    if(!source.headers) {\r\n        source.headers = {};\r\n    }\r\n\r\n    const details = Object.assign(\r\n        Object.create(null),\r\n        {\r\n            method : \"GET\",\r\n        },\r\n        source,\r\n        config,\r\n        {\r\n            url           : new URL(source.url),\r\n            algorithm     : \"AWS4-HMAC-SHA256\",\r\n            date          : parseDate(source),\r\n            sortedHeaders : sorted(source),\r\n        }\r\n    );\r\n\r\n    const canonical = request(details);\r\n    const sts = stringToSign(details, canonical);\r\n    const sig = signature(details, sts);\r\n    const auth = authorization(details, sig);\r\n\r\n    source.headers[\"X-Amz-Date\"] = details.date.long;\r\n    \r\n    if(config.sessionToken) {\r\n        source.headers[\"X-Amz-Security-Token\"] = config.sessionToken;\r\n    }\r\n    \r\n    source.headers.Authorization = auth;\r\n\r\n    // Add partial output to response for tests so each step can be validated\r\n    /* istanbul ignore next */\r\n    if(testing) {\r\n        source.test = {\r\n            canonical,\r\n            sts,\r\n            auth,\r\n        };\r\n    }\r\n\r\n    return source;\r\n};\r\n","import { hash } from \"../hash.js\";\r\n\r\nimport query from \"./query.js\";\r\nimport { values, signed } from \"./headers.js\";\r\nimport path from \"./path.js\";\r\n\r\nexport default (req) => {\r\n    const { method, body, sortedHeaders } = req;\r\n\r\n    // https://docs.aws.amazon.com/general/latest/gr/sigv4-create-canonical-request.html\r\n    return [\r\n        method.toUpperCase(),\r\n        \r\n        // Canonical Path\r\n        path(req),\r\n        \r\n        // Canonical Query\r\n        query(req),\r\n        \r\n        // Canonical Headers\r\n        values(sortedHeaders),\r\n\r\n        // Extra linebreak\r\n        \"\",\r\n\r\n        // Signed Headers\r\n        signed(sortedHeaders),\r\n\r\n        // Hashed payload\r\n        hash(typeof body === \"string\" ? body.trim() : body),\r\n    ].join(\"\\n\");\r\n};\r\n","import { hmac } from \"./hash.js\";\r\n\r\n// https://docs.aws.amazon.com/general/latest/gr/sigv4-calculate-signature.html\r\nexport default ({ date, secretAccessKey, region, service }, sts) => {\r\n    const kDate = hmac(date.short, `AWS4${secretAccessKey}`);\r\n    const kRegion = hmac(region, kDate);\r\n    const kService = hmac(service, kRegion);\r\n    const kSignature = hmac(\"aws4_request\", kService);\r\n\r\n    return hmac(sts, kSignature);\r\n};\r\n","import { hash } from \"./hash.js\";\r\n\r\n// https://docs.aws.amazon.com/general/latest/gr/sigv4-create-string-to-sign.html\r\nexport default ({ algorithm, date, region, service }, canonical) => [\r\n        // Signing Function\r\n        algorithm,\r\n        \r\n        // Date Time\r\n        date.long,\r\n        \r\n        // Scope\r\n        `${date.short}/${region}/${service}/aws4_request`,\r\n        \r\n        // Signed canonical request\r\n        hash(canonical),\r\n    ].join(\"\\n\");\r\n"],"names":["create","Object","F","obj","subtype","prototype","C","C_lib","lib","Base","extend","overrides","this","mixIn","hasOwnProperty","init","$super","apply","arguments","instance","properties","propertyName","toString","clone","WordArray","words","sigBytes","undefined","length","encoder","Hex","stringify","concat","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","i","thatByte","Math","ceil","call","slice","random","nBytes","rcache","r","m_w","m_z","mask","result","_r","push","C_enc","enc","hexChars","bite","join","parse","hexStr","hexStrLength","parseInt","substr","Latin1","latin1Chars","String","fromCharCode","latin1Str","latin1StrLength","charCodeAt","Utf8","decodeURIComponent","escape","e","Error","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","data","_process","doFlush","dataWords","dataSigBytes","blockSize","nBlocksReady","nWordsReady","max","_minBufferSize","nBytesReady","min","offset","_doProcessBlock","processedWords","splice","C_algo","Hasher","cfg","_doReset","update","messageUpdate","finalize","_doFinalize","_createHelper","hasher","message","_createHmacHelper","key","HMAC","algo","Crypto","_hasher","hasherBlockSize","hasherBlockSizeBytes","oKey","_oKey","iKey","_iKey","oKeyWords","iKeyWords","innerHash","H","K","isPrime","n","sqrtN","sqrt","factor","getFractionalBits","nPrime","pow","W","SHA256Hasher","SHA256","_hash","M","a","b","c","d","f","g","h","gamma0x","gamma0","gamma1x","gamma1","maj","sigma0","t1","nBitsTotal","nBitsLeft","floor","HmacSHA256","hash","str","hmac","encode","replace","x","toUpperCase","sort","localeCompare","ref","source","params","url","searchParams","forEach","value","keys","const","trim","val","values","headers","map","Array","isArray","vals","signed","sorted","toLowerCase","ref$1","keya","keyb","multipleSlashesRegex","requestRequired","configRequired","validate","config","let","missing","filter","field","authorization","req","sig","algorithm","accessKeyId","date","region","service","sortedHeaders","dateCleanRegex","parseDate","datetime","Date","now","toISOString","short","split","long","details","assign","method","URL","sts","kDate","secretAccessKey","kRegion","kService","kSignature","signature","canonical","stringToSign","pathname","query","body","auth","sessionToken","Authorization"],"mappings":"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"}